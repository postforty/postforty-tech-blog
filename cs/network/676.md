# 네트워크 인프라 공사 후 발생한 MAC 주소 불일치 문제 해결

## 1. 문제 개요

네트워크 인프라 공사 후 공사 전에는 외부에서 접근 가능했던 서버에 접근하지 못하는 문제(내부 망에서는 접근 가능)가 발생했고, ISP의 MAC 클리어 작업을 통해 해결되었다.

## 2. MAC 클리어의 원리

### 2-1. MAC 클리어의 정의

MAC 클리어는 ISP 또는 상위 라우터 장비에 저장된 이전 장비의 MAC 주소 정보를 삭제하고, 현재 연결된 장비의 MAC 주소를 새로 인식하도록 만드는 작업이다.

### 2-2. 문제의 근본 원인

#### 2-2-1. MAC-IP 불일치 발생 과정

공사 전에는 서버의 공인 IP가 이전 모뎀/라우터의 MAC 주소와 연결되어 ISP 시스템에 등록되어 있었다.

- **공사 후 상황**: 모뎀이나 상위 라우터가 교체되었다.
- **MAC 주소 변경**: ISP 시스템이 인식하는 MAC 주소는 여전히 이전 장비의 MAC 주소이다.
- **라우팅 오류**: 외부에서 공인 IP로 들어오는 트래픽이 현재 연결된 새 장비의 MAC 주소와 일치하지 않아 라우팅이 실패하고 ISP 망 경계에서 차단되었다.

## 3. MAC 클리어의 효과

### 3-1. 시스템 정상화 과정

MAC 클리어 작업을 통해 ISP 시스템은 다음과 같이 정상화된다.

- **MAC 주소 갱신**: 이전 MAC 주소 정보가 삭제되고, 현재 서버가 연결된 장비(새 모뎀/라우터)의 MAC 주소를 새롭게 인식한다.
- **IP-MAC 매핑**: 공인 IP가 올바른 장비의 MAC 주소와 정확하게 매핑된다.
- **트래픽 정상화**: 외부에서 들어오는 웹 트래픽(TCP 80, 443 등) 및 패키지 요청 트래픽이 정상적인 경로를 통해 서버에 도달하게 된다.

## 4. 결론

### 4-1. 문제의 본질

이번 문제는 서버의 IP 설정과 ISP의 MAC 주소 기반 인증/라우팅 시스템 간의 정보 불일치로 인해 발생한 네트워크 오류였다.

### 4-2. 향후 대응 방안

네트워크 인프라 공사 후에는 MAC 주소 불일치가 매우 흔하게 발생하므로, 유사 문제가 발생할 경우 ISP쪽에 MAC 클리어를 우선적으로 요구하자!
